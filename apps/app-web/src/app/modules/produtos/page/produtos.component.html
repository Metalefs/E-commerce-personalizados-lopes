<div class="columns is-gapless my-3 shadow-light is-mobile is-hidden-tablet w-full pos-sticky bellow-nav top-0 z-index-top">
  <div class="column has-background-white bo-0">
    <div mat-flat-button class="card pointer clickable txt-center a-i-c bo-0 w-full py-2 px-3" (click)="AbrirDialogoCategorias()">
      <p>Categorias</p>
      <span class="is-size-7"><em>({{CategoriaAtiva.Nome}})</em></span>
      <!-- <mat-icon>category</mat-icon> -->
    </div>
  </div>
  <div class="column has-background-white bo-0">
    <div mat-flat-button class="card pointer clickable txt-center a-i-c bo-0 w-full py-2 px-3" (click)="AbrirDialogoOrdenacao()">
        <p>Ordenar</p>
        <span class="is-size-7"><em>({{translate(activeOrderFilter)}})</em></span>
    </div>
  </div>
  <mat-divider></mat-divider>
</div>
<div [@cardFlip]="state" class="section mb-0 px-1c pb-0" id="Básicos">


  <div class="columns px-3 px-1c py-4">
    <div class="column is-12-mobile is-hidden-mobile">
      <div class="flex-c w-full container portfolio pos-sticky top-0">
        <div class="is-hidden-mobile  w-full">
          <mat-list class="w-full">
            <h2 class="title is-5 texto-categorias">Categorias</h2>
            <mat-list-item
              class="pointer w-full w-full-m"
              (click)="SetCategoria(null)"
              [ngClass]="CategoriaAtiva?.Nome == defaultCategory ? 'active' : ''">
              <button mat-strocked-button>{{defaultCategory}}</button>
              <mat-icon [ngClass]="CategoriaAtiva?.Nome == defaultCategory ?'has-text-success' :''">{{CategoriaAtiva?.Nome == defaultCategory ?  'done' : 'chevron_right'}}</mat-icon>
              <mat-divider></mat-divider>
            </mat-list-item>
            <mat-list-item *ngFor="let categoria of (Categorias$ | async)"
              [style.backgroundColor]="categoria?.Cor"
              class="pointer w-full w-full-m"
              (click)="SetCategoria(categoria)"
              [ngClass]="CategoriaAtiva?.Nome == categoria.Nome ? 'active' : ''">
              <button mat-strocked-button>{{categoria.Nome}}</button>
              <mat-icon [ngClass]="CategoriaAtiva?.Nome == categoria.Nome ?'has-text-success' :''">{{CategoriaAtiva?.Nome == categoria.Nome ?  'done' : 'chevron_right'}}</mat-icon>
              <mat-divider></mat-divider>
            </mat-list-item>
          </mat-list>
        </div>
      </div>
    </div>
    <div class="column is-9 is-12-mobile produto-column">
      <div class="pb-0 mb-0">
        <div class="w-full">
          <div class="columns is-mobile is-multiline">
            <div class="column is-12-mobile">
              <div class="control has-icons-right">
                <input
                  [(ngModel)]="activeSearchFilter"
                  (change)="atualizarFiltroAtivo()"
                  class="py-2 input"
                  type="text"
                  placeholder="filtrar produtos na categoria {{CategoriaAtiva?.Nome}}">
                  <span class="icon is-small is-right">
                    <mat-icon>search</mat-icon>
                  </span>
              </div>
            </div>
            <div class="column is-hidden-mobile">
              <div class="w-full">
                <div class="select w-full">
                  <select class="py-2  w-full" [(ngModel)]="activeOrderFilter" (change)="atualizarFiltroAtivo()" [value]="activeOrderFilter">
                    <option *ngFor="let order of ordertypes; let i = index" [selected]="i == 0" [value]="order.id">{{order.name}}</option>
                  </select>
                </div>
            </div>
          </div>
        </div>
        <!-- <h2 class="subtitle is-3 mb-5 texto-categoria-ativa">{{CategoriaAtiva.Nome}}</h2> -->

        <div class="columns is-multiline is-gapless portfolio-container dis-flex">
          <div @fadeIn *ngIf="!(Filtro$ | async).FiltroProdutos[0]" class="m-lr-auto">
            <figure class="no-match-img">
              <img src="/assets/images/figures/undraw_empty_xct9.svg" class="no-match-img" alt="Não foram encontrados produtos correspondentes à sua pesquisa">
            </figure>
            <p>Não foram encontrados produtos correspondentes à sua pesquisa</p>
            <button md-mat-stroked-button color="primary" (click)="redefinirBusca()">Clique para redefinir a busca</button>
          </div>
          <mat-divider class="pb-2"></mat-divider>
          <ng-container *ngFor="let produto of Produtos$ |async" class="mx-0 px-0 ">
            <div @fadeIn
              class="column is-3-desktop is-12-mobile is-4-tablet  is-6-mobile"
              *ngIf="loading"
              >
              <mat-spinner></mat-spinner>
            </div>
            <div @fadeIn
              class="column is-3-desktop is-12-mobile is-4-tablet pt-4"
              *ngIf = "filtroAtivo(produto) && !loading">
              <personalizados-lopes-card-produto @slideInOut
                [Produto]="produto"
                [MostarOpcoes]="true"
              ></personalizados-lopes-card-produto>
            </div>
          </ng-container>

        </div>
      </div>
    </div>
  </div>
</div>
