<div class=" has-background-light bbr">
  <div class="has-background bg is-medium is-white btr w-full has-background-light">

    <p-breadcrumb [styleClass]=" ' has-background-light has-text-white'" *ngIf="this.Produto" [model]="items"
    [home]="home"></p-breadcrumb>
    <p-skeleton *ngIf="!Produto" styleClass="skeleton p-breadcrumb breadcrumb pt-3"></p-skeleton>
  </div>
</div>
<!-- -->
<section class="hero is-medium is-white btr">

  <div class="hero-body pt-3 pb-2">
      <div class="bbr " >
        <div class="">
          <div class="bbr" >
            <div *ngIf="!Produto">
              <div class="p-grid p-formgrid">
                <div class="p-field p-col-12 p-md-6">
                  <p-skeleton styleClass="mb-2 pb-2"></p-skeleton>
                  <p-skeleton width="10rem" styleClass="mb-2 pb-2"></p-skeleton>
                  <p-skeleton width="5rem" styleClass="mb-2 pb-2"></p-skeleton>
                  <p-skeleton height="2rem" styleClass="mb-2 pb-2"></p-skeleton>
                  <p-skeleton width="10rem" height="4rem"></p-skeleton>
                </div>
              </div>
            </div>
            <div class="columns is-multiline is-4 pt-3 px-1" *ngIf="Produto">
              <div class="column is-6-desktop is-12-tablet">
                <div class="">
                  <p-skeleton *ngIf="!Produto" styleClass="skeleton "></p-skeleton>
                  <div *ngIf="Produto?.Rating.length>10" class="{{mobile ? 'txt-left': 'txt-left'}} my-1 star-width dis-flex flex-w w-full">

                    <star-rating [ngClass]="loading ? 'button is-loading':''" class="subtitle is-size-7"
                      labelText="{{meanRating()}}" [showHalfStars]="true" [step]="0.5" size="medium"
                      [rating]="meanRating()" staticColor="ok"
                      [hoverEnabled]="true" [starType]="'svg'">
                    </star-rating>
                    <span class="subtitle fs-12">em {{Produto?.Rating.length}}
                      avaliaç{{Produto?.Rating.length==1?'ão':'ões'}}</span>

                  </div>
                  <!-- <mat-tab-group [selectedIndex]="selected.value"
                    (selectedIndexChange)="selected.setValue($event)">
                    <mat-tab>

                    </mat-tab>
                  </mat-tab-group> -->
                  <gallery gallerize id="myGallery" [ngClass]="mobile?'':''" *ngIf="galleryConfig$ | async; let config"
                  [counter]="false" [nav]="false" [loadingStrategy]="'lazy'" [thumbWidth]="config.thumbWidth"
                  [dots]="true" [thumbHeight]="config.thumbHeight" [thumbPosition]="config.thumbPosition">
                </gallery>
                <!-- <span class="type-meta">
                  <i class="pi pi-tag"></i>
                  <mat-chip-list aria-label="Tags">
                    <mat-chip color="accent" [routerLink]="" selected *ngFor="let tag of Produto?.Tags">
                      <p class="has-text-light">{{tag}}</p>
                    </mat-chip>
                  </mat-chip-list>

                </span> -->

                <div class="column is-6 pb-0 is-hidden-touch">
                  <div class="w-full flex-w">
                    <button mat-button [matMenuTriggerFor]="menu2"><i class="pi pi-share-alt"></i></button>
                    <mat-menu #menu2="matMenu">
                      <div mat-menu-item>
                        <share-button class="mt-3 hoverable" button="facebook" theme="modern-dark" [showText]="false">
                        </share-button>
                      </div>
                      <div mat-menu-item>
                        <share-button class="mt-3 hoverable" button="twitter" theme="modern-dark" [showText]="false">
                        </share-button>
                      </div>
                    </mat-menu>

                    <button class="w-full dis-flex flex-w flex-m" title="Gostei" matBadge="{{Produto?.Likes}}"
                      matBadgeColor="accent" (click)="Like()" mat-icon-button [ngClass]="Liked? 'liked': ''"
                      [ngClass]="loading ? 'button is-loading':''">
                      <p>
                        <mat-icon [ngClass]="Liked? 'liked': ''" class="heartbutton color-light-red">
                          {{Liked? 'favorite': 'favorite_border'}}</mat-icon>
                      </p>
                    </button>
                  </div>
                  <mat-chip-list *ngIf="Liked" aria-label="Thanks">
                    <mat-chip color="primary" selected>Você curtiu este produto</mat-chip>
                  </mat-chip-list>
                </div>
                </div>
                <span class="is-hidden-touch subtitle is-size-7 pl-0 ml-0 column is-12-touch is-12 w-full"
                *ngIf="Produto?.DescricaoRapida">{{Produto?.DescricaoRapida}}</span>
              </div>
              <div class="column is-6 has-background-white bbr shadow-light section" style="margin-bottom:-26px">

                <div class="box">
                  <div class="{{mobile ? 'txt-left': 'txt-left'}}">

                    <h1 class="titulo-produto title">{{Produto?.Nome}}</h1>

                    <ul class="list-unstyled">
                      <li><p class="subtitle"><b>Modelo: </b> <span>{{Produto?.Modelo || ''}}</span></p></li>
                      <li><p class="subtitle"><b>Marca: </b> <span>{{Produto?.Marca || ''}}</span></p></li>
                    </ul>

                    <!-- <div class="block ">
                      <div>
                        <share-button class="mt-3 hoverable" button="facebook" theme="modern-dark" [showText]="true" [text]="'Compartilhar este produto'">
                        </share-button>
                      </div>
                      <div>
                        <share-button class="mt-3 hoverable" button="twitter" theme="modern-dark" [showText]="true" [text]="'Twittar este produto'">
                        </share-button>
                      </div>
                    </div> -->

                  </div>
                </div>
                <div class="mb-0 pb-0 px-3">

                  <div class="{{mobile ? 'txt-left': 'txt-left'}}" *ngIf="Produto">
                    <div class="columns is-multiline">

                      <div class="column is-12-desktop is-12-tablet is-12-mobile">

                        <form *ngIf="produtoForm" action="" method="post" [formGroup]="produtoForm">
                          <div class="columns txt-left is-vcentered is-multiline" >
                            <div class="field ">
                              <div class="control is-large flex-c flex-m">
                                <div>
                                  <button mat-icon-button (click)="DecrescerQuantidade()">
                                    <mat-icon class="less">remove</mat-icon>
                                  </button>
                                  <input id="quantidade" *ngIf="Produto" placeholder="{{Produto?.QuantidadeMinima}}"
                                    [formControlName]="'quantidade'"
                                    value="{{Produto?.QuantidadeMinima <= 1 ? 1 : Produto?.QuantidadeMinima}}" type="number"
                                    (change)="VerificarQuantidade($event)"
                                    min="{{Produto?.QuantidadeMinima <= 1 ? 1 : Produto?.QuantidadeMinima}}"
                                    class="quantidade-produto input" [ngClass]="{'is-danger':ErroQuantidade()}"
                                    [(ngModel)]="(Produto).Quantidade">
                                  <button mat-icon-button (click)="IncrementarQuantidade()">
                                    <mat-icon class="more">add</mat-icon>
                                  </button>
                                </div>
                                <!-- <span class="has-text-grey-light subtitle is-size-7" *ngIf="Produto?.QuantidadeMinima">
                                  <em>
                                    *Minimo {{Produto?.QuantidadeMinima}} unidade(s)
                                  </em>
                                </span> -->
                              </div>
                            </div>

                            <div class="column is-6" [ngClass]="{'is-danger':ErroTamanho()}"
                            *ngIf="Produto?.Tamanhos">
                             <mat-label class="label is-small is-size-7">Tamanho: {{Produto?.Tamanho || ""}}</mat-label>
                              <div *ngFor="let opt of Produto?.Tamanhos" [value]="opt" class="shadow-light button is-small" (click)="Produto.Tamanho = opt">
                                  <div class="" (click)="Produto.Tamanho = opt">
                                    <p>{{opt}}</p>
                                  </div>
                                </div>
                            </div>
                            <div class="column is-6"  *ngIf="Produto?.Tamanho">
                              <personalizados-lopes-cor-produto-selector [Produto]="Produto" (onSetColor)="setColor($event)"></personalizados-lopes-cor-produto-selector>
                            </div>

                          </div>
                          <div *ngIf="Produto?.Status != statusProduto.esgotado" class="txt-left pt-4">
                            <!-- <div class="">

                              <p class="subtitle is-7">Calcule frete e prazo</p>
                              <div class="">
                                <mat-form-field appearance="fill">
                                  <mat-label>CEP</mat-label>
                                  <input matInput (change)="CarregarDetalhesCEP()" class="w-full"
                                    [formControlName]="'cep'" placeholder="000000-000" mask="00000-000" name="CEP">
                                </mat-form-field>
                              </div>
                            </div> -->

                            <div class="columns pb-0 mb-0 ">
                              <div class="dis-flex flex-w column pb-0 mb-0 bbr">
                                <div class="my-2">
                                  <ng-container
                                    *ngIf="Produto?.Status == statusProduto.promocao then preco_promo else preco_normal">
                                  </ng-container>
                                  <ng-template #preco_promo>
                                    <div class="">
                                      <p class="preco linethr fs-12"><strong>R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</strong></p>
                                      <p class="preco promocao "><strong>R$ {{Produto?.PrecoPromocional.toFixed(2) ||
                                          '0.00'}}</strong></p>
                                    </div>
                                  </ng-template>
                                  <ng-template #preco_normal>
                                    <div class="">
                                      <p class="preco py-2"><strong>R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</strong></p>
                                    </div>
                                  </ng-template>
                                  <div class="" *ngIf="Produto?.Parcelas">
                                    <p class="">
                                      Em até {{Produto?.Parcelas == 0 ?'1':Produto?.Parcelas}}x de <span
                                        class="preco-produto"><b>R${{((Produto?.Status == statusProduto.promocao ?
                                          Produto.PrecoPromocional : Produto.Preco) / (Produto?.Parcelas == 0 ? 1:
                                          Produto?.Parcelas)).toFixed(2)}}</b></span>
                                      sem juros
                                    </p>
                                  </div>

                                </div>
                                <ng-container *ngIf="findInvalidControlsRecursive() then erro else done"></ng-container>
                                <ng-template #erro>
                                  <article class="message margin is-white shadow-light py-0 my-0 bbr"
                                    *ngIf="Produto && produtoForm">
                                    <div class="message-body" @fadeIn>
                                      <p class="">Para comprar, Selecione o <strong>Tamanho, Cor</strong> e
                                        <strong>Quantidade</strong><a href="#topo" pageScroll></a>
                                        <mat-icon style="transform: rotate(180deg);">arrow_drop_down_circle</mat-icon>
                                      </p>
                                    </div>
                                    <button @fadeIn *ngIf="Produto" mat-raised-button
                                    disabled
                                    class="button bbr share-button wp-btn border-light pb-0 mb-0 w-full flex-m flex-c has-text-white has-text-weight-bold">
                                    {{textoAdicionar}}
                                  </button>
                                  </article>
                                </ng-template>
                                <ng-template #done>
                                  <button @fadeIn *ngIf="Produto" mat-raised-button
                                    [disabled]="Produto?.Status == statusProduto.esgotado"
                                    (click)="AdicionarAoOrcamento()"
                                    class="button bbr share-button wp-btn border-light pb-0 mb-0 w-full flex-m flex-c has-text-white has-text-weight-bold">
                                    {{textoAdicionar}}
                                  </button>

                                  <button *ngIf="this.isOrcamento" mat-flat-button title="Criar novo pedido"
                                    [disabled]="Produto?.Status == statusProduto.esgotado || !Produto?.Cor ||  !Produto?.Tamanho"
                                    (click)="DuplicarOrcamento()" color="accent"
                                    class="background-light-red has-text-white has-text-weight-medium bo-cir">
                                    <mat-icon>add</mat-icon>
                                    Novo
                                  </button>
                                </ng-template>
                              </div>
                            </div>
                            <!-- <button @fadeIn mat-flat-button title="Personalizar"
                            [disabled]="Produto?.Status == statusProduto.esgotado || !Produto?.Cor ||  !Produto?.Tamanho"
                            (click)="AbrirModalArte()" class="" color="warn" class="px-2 mx-2 has-text-white has-text-weight-bold">
                              <mat-icon>photo</mat-icon>Selecionar Arte
                            </button> -->
                            <mat-list *ngIf="!IsValid" class="px-2 mx-2 box border">
                              <mat-list-item *ngFor="let erro of Erros">
                                <p class="subtitle is-size-6 border">*{{erro.erro}}</p>
                                <hr>
                              </mat-list-item>
                            </mat-list>
                            <p-skeleton @fadeIn *ngIf="!Produto" height="32" width="100%"
                              class=" w-full flex-m flex-c mx-2">
                            </p-skeleton>
                          </div>
                          <div *ngIf="Produto?.Status == statusProduto.esgotado" class="box pt-5 w-full">
                            <personalizados-lopes-botao-esgotado [Produto]="Produto">
                            </personalizados-lopes-botao-esgotado>
                          </div>
                          <button mat-raised-button (click)="EntrarEmContato()" routerLinkActive="router-link-active"
                            title="Entrar em contato por whatsapp"
                            class="button w-full is-success my-0 flex-m flex-c has-text-white has-text-weight-medium px-1">
                            <fa-icon class="color-wp" [icon]="iconeWhatsapp" [size]="'lg'"></fa-icon>
                            <span class="ml-3 nunitoParagraphy16 has-text-white">Fazer pedido pelo whatsapp</span>
                          </button>
                        </form>
                        <div class="pt-3 px-2 txt-left of-x-scroll">
                          <div @fadeIn class="box columns is-multiline" *ngIf="this.Produto?.Arte">
                            <a>Como essa arte será usada no produto?</a>
                            <div class="column">
                              <mat-card>
                                <mat-card-header>
                                  <mat-card-subtitle>Frente</mat-card-subtitle>
                                </mat-card-header>
                                <figure class="image is-128x128" (click)="AbrirModalArte()">
                                  <img mat-mat-card-image [src]="this.Produto?.Arte" height="200">
                                </figure>
                                <mat-card-actions>
                                  <a mat-icon-button (click)="Produto.Arte = null">
                                    <mat-icon>clear</mat-icon>
                                  </a>
                                </mat-card-actions>
                              </mat-card>
                            </div>
                            <div @fadeIn *ngIf="Produto?.ArteSecundaria" class="column">
                              <mat-card>
                                <mat-card-header>
                                  <mat-card-subtitle>Secundaria</mat-card-subtitle>
                                </mat-card-header>
                                <figure class="image is-128x128">
                                  <img mat-mat-card-image [src]="this.Produto?.ArteSecundaria" height="200">
                                </figure>
                                <mat-card-actions>
                                  <a mat-icon-button (click)="Produto.ArteSecundaria = null">
                                    <mat-icon>clear</mat-icon>
                                  </a>
                                </mat-card-actions>
                              </mat-card>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <!-- <div class="text-center is-right w-full">
                      <ul class="notification is-white shadow-light has-text-grey-light w-full">
                        <li class="w-full"><i class="is-right pi pi-question-circle"></i></li>
                        <li *ngFor="let infoPagamento of infosPagamento">{{infoPagamento.descricao}}</li>
                      </ul>
                    </div> -->
                  </div>
                </div>

                <figure class="image is-64x64 img-orcamento" [ngClass]="isOrcamento ? 'active' : ''">
                  <img src="{{Produto?.Imagem[0]}}" alt="">
                </figure>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="hero-foot px-3 py-3 "id="product-display">
      <div class="column is-6 pb-0 is-hidden-desktop">
        <div class="w-full flex-w">
          <button mat-button [matMenuTriggerFor]="menu2"><i class="pi pi-share-alt"></i></button>
          <mat-menu #menu2="matMenu">
            <div mat-menu-item>
              <share-button class="mt-3 hoverable" button="facebook" theme="modern-dark" [showText]="false">
              </share-button>
            </div>
            <div mat-menu-item>
              <share-button class="mt-3 hoverable" button="twitter" theme="modern-dark" [showText]="false">
              </share-button>
            </div>
          </mat-menu>

        </div>
      </div>
      <mat-tab-group class="">
        <mat-tab label="Informações" (click)="AdicionarDescricao(this.Produto)">
          <div class="has-background-white py-3 px-3">
            <div class="w-full is-multiline">
              <!-- <h3 class="has-text-weight-bold ltr-sp-2">Descrição do produto</h3> -->
              <div class="descricao-produto column is-12-touch is-12 w-full"
                [innerHTML]="(el?.innerHTML)"></div>

              <div class="descricao-produto column is-12-touch is-12 w-full" >
                <h2><strong>ESPECIFICAÇÕES</strong></h2>
                <div [innerHTML]="(Produto?.Especificacoes)"></div>
              </div>

        <button class="w-full dis-flex flex-w flex-m" title="Gostei" matBadge="{{Produto?.Likes}}"
        matBadgeColor="accent" (click)="Like()" mat-icon-button [ngClass]="Liked? 'liked': ''"
        [ngClass]="loading ? 'button is-loading':''">
        <p>
          <mat-icon [ngClass]="Liked? 'liked': ''" class="heartbutton color-light-red">
            {{Liked? 'favorite': 'favorite_border'}}</mat-icon>
        </p>
      </button>
      <mat-chip-list *ngIf="Liked" aria-label="Thanks">
        <mat-chip color="primary" selected>Você curtiu este produto</mat-chip>
      </mat-chip-list>
            </div>
          </div>

        </mat-tab>
        <mat-tab label="Avaliações">
          <div class="margin px-6 py-1 mb-6" *ngIf="Produto">
            <div class="z-index-2 px-2 py-2 my-6">
              <div class="mx-2">
                <div class="w-full">
                  <p class="has-text-weight-bold ltr-sp-2">Você já tem este produto?</p>
                  <span class="subtitle is-size-7">Compartilhe a sua opinião com a gente.</span>
                </div>
                <p><strong>{{Comentarios?.length||0}} comentários</strong></p>
                <star-rating [ngClass]="loading ? 'button is-loading':''" class="subtitle is-size-7"
                          labelText="{{meanRating()}}" [showHalfStars]="true" [step]="0.5" size="medium"
                          [rating]="meanRating()" staticColor="ok" (starClickChange)="onClick($event)"
                          (ratingChange)="onRatingChange($event)" (hoverRatingChange)="onHoverRatingChange($event)"
                          [hoverEnabled]="true" [starType]="'svg'">
                        </star-rating>
                <personalizados-lopes-escrever-comentario (EnviarComentario)="this.Comentar($event)">
                </personalizados-lopes-escrever-comentario>
              </div>
            </div>
            <personalizados-lopes-exibir-lista-comentario-produto [Comentarios]="ComentariosProduto">
            </personalizados-lopes-exibir-lista-comentario-produto>
          </div>
        </mat-tab>
      </mat-tab-group>
      <!-- <button mat-mini-fab color="accent" class="shadow-light bo-0 has-text-weight-bold has-text-warning"><a href="#product-display"  pageScroll><i class="pi pi-arrow-down"></i></a></button> -->
    </div>
</section>

<div class=" has-background-light bbr">
  <div class="has-background bg is-medium is-white btr w-full has-background-light" (mouseover)="
    this.imgProduto.classList.remove('show-img');
    this.imgProduto.classList.add('hide-img');
    this.imgProduto2.classList.add('show-img');
    this.imgProduto2.classList.remove('hide-img');
    " (mouseout)="
    this.imgProduto2.classList.remove('show-img');
    this.imgProduto2.classList.add('hide-img');
    this.imgProduto.classList.add('show-img');
    this.imgProduto.classList.remove('hide-img');
  ">

    <div class="columns bg-transp is-vcentered is-mobile">
      <div class="column is-3-mobile is-4-desktop">
        <figure class="image is-128x128 mb-0 pb-0">
          <img data-aos="zoom-in" #imgProduto class="background is-transparent"
            [src]="Produto?.Imagem[1]|| Produto?.Imagem[0]" [style.opacity]="'1'"
            alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
          <img data-aos="zoom-in" #imgProduto2 class="background is-transparent hide-img"
            [src]="Produto?.Imagem[2] || Produto?.Imagem[0]"
            alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
        </figure>
      </div>
      <div class="column mb-0 pb-0 of-x-scroll">
        <nav class="level dis-flex flex-sa of-x-scroll">
          <div class="level-item has-text-centered size2 bor1">
            <div>
              <p class="heading has-text-light">Avaliações</p>
              <p class="title has-text-white">{{Produto?.Rating.length}}</p>
            </div>
          </div>
          <!-- <div class="level-item has-text-centered">
            <div>
              <p class="heading has-text-light">Disponiveis</p>
              <p class="title has-text-white">N/A</p>
            </div>
          </div> -->
          <div class="level-item has-text-centered size2 bor1">
            <div>
              <p class="heading has-text-light">Compras</p>
              <p class="title has-text-white">{{Produto?.Vendas}}</p>
            </div>
          </div>
          <div class="level-item has-text-centered size2 bor1">
            <div>
              <p class="heading has-text-light">Visualizações</p>
              <p class="title has-text-white">{{Produto?.Visualizacoes}}</p>
            </div>
          </div>
          <div class="level-item has-text-centered size2 bor1">
            <div>
              <p class="heading has-text-light">Likes</p>
              <p class="title has-text-white">{{Produto?.Likes}}</p>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>
</div>

<div class="w-full  bg flex-w flex-sa px-6 my-2">
  <a [routerLink]="'/produtos'" class="has-text-light">
    <button mat-icon-button>
      <mat-icon>chevron_left</mat-icon>
    </button>
  </a>
  <a [routerLink]="'/showcase'" class="has-text-light">
    <button mat-icon-button>
      <mat-icon>collections</mat-icon>
    </button>
  </a>
</div>
<div class="px-4 margin py-4 txt-center" style="overflow-x: hidden;">

  <div class="box py-6 mb-3" *ngIf="Produto?._id">
    <personalizados-lopes-tag-produto-swiper [TAGS]="Produto?.Tags"></personalizados-lopes-tag-produto-swiper>
  </div>

  <mat-divider></mat-divider>

  <div class="   mb-3" *ngIf="Produto?._id">
    <personalizados-lopes-produto-swiper class="z-index-1" [slidesPerView]="2" [TipoOrdenacao]="tipoOrdenacaoSliderProduto.Visualizacoes">
    </personalizados-lopes-produto-swiper>
  </div>

  <mat-divider></mat-divider>

  <!-- <div class="px-4 py-5 box">
    <personalizados-lopes-exibir-lista-comentario-produto [Comentarios]="ComentariosProduto">
    </personalizados-lopes-exibir-lista-comentario-produto>

    <mat-divider></mat-divider>
  </div> -->

  <!-- <div class="margin">

    <personalizados-lopes-blog-swiper [TAGS]="Produto?.Tags"></personalizados-lopes-blog-swiper>
  </div> -->

  <personalizados-lopes-loading-cube *ngIf="redirecionando" [Mensagem]="''">
  </personalizados-lopes-loading-cube>


</div>
