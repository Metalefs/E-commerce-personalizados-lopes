<h1 mat-dialog-title class="tem-cor-primaria">Criação de produto</h1>
<div mat-dialog-content>
  <mat-form-field class="w-full">
    <input matInput type="text" [(ngModel)]="Produto.Nome" placeholder="Nome" title="Nome">
  </mat-form-field>
  <div class="w-full">
    <ckeditor [(ngModel)]="Produto.Descricao" [data]="Produto.Descricao" ></ckeditor>
  </div>
  <mat-form-field class="w-full">
    <input matInput type="text" [(ngModel)]="Produto.Subtitulo" placeholder="Subtitulo">
  </mat-form-field>
  <mat-form-field appearance="">
    <mat-label>Categoria</mat-label>
    <mat-select matNativeControl (selectionChange)="SelecionarCategoria($event)" [(ngModel)]="Produto.NomeCategoria" [value]="Produto.NomeCategoria">
      <mat-option *ngFor="let opt of Categorias" [value]="opt.Nome">
        {{opt.Nome}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field class="">
    <input matInput type="text" [(ngModel)]="Produto.Preco"[value]="Produto.Preco" placeholder="Preco" mask='00.00'>
  </mat-form-field>
  <mat-form-field class="">
    <mat-label>Quantidade Minima</mat-label>
    <input matInput type="number" [(ngModel)]="Produto.QuantidadeMinima"[value]="Produto.QuantidadeMinima">
  </mat-form-field>

  <mat-form-field class="">
    <mat-label>Preco Promocional</mat-label>
    <input matInput type="number" [(ngModel)]="Produto.PrecoPromocional"[value]="Produto.PrecoPromocional">
  </mat-form-field>
  <mat-checkbox matNativeControl  [(ngModel)]="Produto.Destaque"  [checked]="Produto.Destaque">
    Destaque
  </mat-checkbox>

  <mat-form-field class="w-full">
    <mat-chip-list #chipTagList aria-label="Tag selection">
      <mat-chip
        *ngFor="let tag of Produto.Tags"
         [selectable]="selectable"
         [removable]="removable"
         (removed)="removeTag(tag)">
        {{tag}}
        <mat-icon matChipRemove
         *ngIf="removable">
         cancelar
        </mat-icon>
      </mat-chip>
      <input
        placeholder="Tags"
        #tagInput
        [formControl]="tagCtrl"
        [matChipInputFor]="chipTagList"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="addTag($event)">
    </mat-chip-list>
  </mat-form-field>

  <mat-form-field  class="w-full"  appearance="fill">
    <mat-label>Status</mat-label>
    <mat-select matNativeControl [(ngModel)]="Produto.Status"  [value]="Produto.Status">
      <mat-option *ngFor="let opt of statusProduto; let i = index" [value]="i">
        {{opt}}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <div class="file has-name pb-3">
    <label class="file-label">
      <input class="file-input" multiple type="file" (change)="upload($event)">
      <span class="file-cta">
        <span class="file-icon">
          <i class="fas fa-upload"></i>
        </span>
        <span class="file-label">
          Escolha as imagens…
        </span>
        <span class="file-name">
          {{fileNames}}
        </span>
      </span>
    </label>
  </div>

  <mat-form-field class="w-full">
    <mat-chip-list #chipList aria-label="Color selection">
      <mat-chip
        *ngFor="let cor of Produto.Cores"
         [selectable]="selectable"
         [removable]="removable"
         (removed)="removeCor(cor)">
        {{cor.nome}}
        <mat-icon matChipRemove
         *ngIf="removable">
         cancelar
        </mat-icon>
      </mat-chip>
      <input
        placeholder="Nova cor... Separe o nome do valor com ponto e vírgula = branco;#fffff insira com ENTER ou TAB"
        #colorInput
        [formControl]="colorCtrl"
        [matAutocomplete]="auto"
        [matChipInputFor]="chipList"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="addCor($event)">
    </mat-chip-list>
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedCor($event)">
      <mat-option *ngFor="let cor of filteredColors | async" [value]="cor.nome">
        {{cor.nome}}
        <div [style.backgroundColor]="cor.cor" style="width: 20px;height: 20px;"></div>
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <mat-form-field class="w-full">
    <mat-chip-list #chipList2 aria-label="Size selection">
      <mat-chip
        *ngFor="let tamanho of Produto.Tamanhos"
         [selectable]="selectable"
         [removable]="removable"
         (removed)="removeTamanho(tamanho)">
        {{tamanho}}
        <mat-icon matChipRemove
         *ngIf="removable">
         cancelar
        </mat-icon>
      </mat-chip>
      <input
        placeholder="Novo tamanho..."
        #colorInput
        [formControl]="sizeCtrl"
        [matAutocomplete]="auto"
        [matChipInputFor]="chipList2"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="addTamanho($event)">
    </mat-chip-list>
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedTamanho($event)">
      <mat-option *ngFor="let size of filteredSizes | async" [value]="size">
        {{size}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

</div>
<div mat-dialog-actions>
  <button mat-raised-button color="basic" [mat-dialog-close]="Produto">
      Enviar
  </button>
  <button mat-raised-button color="basic" (click)="onNoClick()" cdkFocusInitial>
      Cancelar
  </button>
</div>
