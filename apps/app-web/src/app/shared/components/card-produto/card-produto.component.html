<ng-container *ngIf="MostarOpcoes then Padrao else Minimalista"></ng-container>

<ng-template #Padrao>
  <ng-container *ngIf="TrocaImagem then troca else naotroca"> </ng-container>

  <ng-template #troca>
    <mat-card @fadeIn
    (mouseenter)="
      this.imgProduto.classList.add('hide');
      this.imgProduto.classList.remove('show');
      " (mouseout)="
      this.imgProduto.classList.remove('hide');
      this.imgProduto.classList.add('show');
      "
      matRipple class="portfolio-item zoom of-y-scroll" [style.backgroundColor]="Produto.Categoria.Cor">


      <div #imgProduto matRipple class="dis-flex flex-w">
        <!-- <img
          mat-card-image #imgProduto
          class=""
          [src]="Produto.Imagem[0]" [style.opacity]="'1'" [style.display]="'block'"
          alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
        <img
          mat-card-image #imgProduto2
          class="hide" [src]="Produto.Imagem[1] || Produto.Imagem[0]"
          alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}"> -->
          <slideshow mat-card-image
              *ngIf="imageUrls.length"
              [imageUrls]="imageUrls"
              [arrowSize]="(Carrosel$|async)?.arrowSize"
              [showArrows]="(Carrosel$|async)?.showArrows"
              [disableSwiping]="false"
              [autoPlay]="false"
              [backgroundSize]="'contain'"
              [backgroundPosition]="(Carrosel$|async)?.backgroundPosition"
              [backgroundRepeat]="(Carrosel$|async)?.backgroundRepeat"
              [showDots]="(Carrosel$|async)?.showDots"
              [dotColor]="'black'"
              [showCaptions]="(Carrosel$|async)?.showCaptions"
              [captionColor]="(Carrosel$|async)?.captionColor"
              [captionBackground]="(Carrosel$|async)?.captionBackground"
              [lazyLoad]="true"
              [hideOnNoSlides]="(Carrosel$|async)?.hideOnNoSlides"
              [fullscreen]="(Carrosel$|async)?.fullscreen"
              [autoPlayWaitForLazyLoad]="true"
               >
            </slideshow>
      </div>

      <a class="prod-status " [href]="'/produtos/'+Produto._id" *ngIf="Produto.Cores?.length > 1" >
        <span routerLinkActive="router-link-active"
          class="button is-small is-size-7 bo-0 is-fullwidth is-disabled px-4">
          Disponível em {{Produto.Cores?.length}} cores
        </span>
      </a>

      <mat-card-footer class="px-1 z-index-2">

        <mat-card-title class="w-full my-3 txt-left titulo-produto px-3">

          <a matRipple class="reset-a" [href]="['/produtos/'+ Produto._id]">
            {{Produto?.Nome}}
          </a>

        </mat-card-title>

        <mat-card-header class="w-full txt-left pt-1 of-y-scroll">
          <!-- <div class="my-3" *ngIf="Produto.Rating.length>0">
            <star-rating [size]="'small'" [rating]="meanRating()" [hoverEnabled]="true" [readOnly]="true" [showHalfStars]="true"
              [step]="0.5" staticColor="ok" [starType]="'svg'"></star-rating>
          </div> -->
          <mat-card-subtitle class="mat-card-subtitle is-hidden-desktop is-6">{{Produto?.Subtitulo}}</mat-card-subtitle>

          <mat-card-subtitle
            class="w-full z-index-2 px-3  pb-4 pt-4 is-3 preco  of-y-scroll">
            <ng-container *ngIf="Produto.Status == statusProduto.promocao then preco_promo else preco_normal">
            </ng-container>
            <ng-template #preco_promo>
              <div class="txt-left">
                <p class="preco-produto linethr">R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</p>
                <p class="preco-produto promocao">R$ {{Produto?.PrecoPromocional.toFixed(2) || '0.00'}}</p>
              </div>
            </ng-template>
            <ng-template #preco_normal>
              <div class="txt-left">
                <p class="preco-produto">R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</p>
              </div>
            </ng-template>
            <div class="my-3" *ngIf="Produto.Parcelas && Produto.Parcelas > 0">
              <p class="preto6 parcelas" *ngIf="Produto.Parcelas > 1">
                Em até {{Produto.Parcelas}}x <span
                  class="parcelas">
                  <b>R${{(Produto.Status == statusProduto.promocao ? Produto.PrecoPromocional : Produto.Preco / Produto.Parcelas).toFixed(2)}}</b></span>
                sem juros
              </p>
              <p class="preto6 parcelas" *ngIf="Produto.Parcelas == 1">
                Á vista por <span
                  class="parcelas"><b>R${{(Produto.Status == statusProduto.promocao ? Produto.PrecoPromocional : Produto.Preco / Produto.Parcelas).toFixed(2)}}</b></span>
                sem juros
              </p>
            </div>

          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions class="">
          <mat-divider class="my-0"></mat-divider>
          <div class="px-4 py-2">
            <span [routerLink]="['/produtos/'+ Produto._id]" routerLinkActive="router-link-active"
              class="button is-small is-fullwidth box px-4 mb-2 pb-2">
              <span><i class="pi pi-plus"></i> Veja mais</span>
            </span>
          </div>
        </mat-card-actions>
        <!-- <a>
          <button [disabled]="Produto.Status == statusProduto.esgotado" mat-flat-button
            (click)="AdicionarAoOrcamento(Produto)" color="primary"
            class="border shadow-light w-full px-2 btn-cart dis-flex flex-sb">
            <ng-container *ngIf="Produto.Status != statusProduto.esgotado
        then adicionar else esgotado"></ng-container>
            <ng-template #adicionar>
              <mat-icon>add_shopping_cart</mat-icon>
              <span class="spacer"></span>
              <span>Carrinho</span>
            </ng-template>
            <ng-template #esgotado>
              Esgotado
            </ng-template>
          </button>
        </a> -->

      </mat-card-footer>
      <div class="z-index-1">
        <div class="content">
          <div class="portfolio-overlay events-none w-full">
            <div class="overlay-items w-full txt-center is-hidden-desktop">
              <p>
                {{Produto?.Nome}}
              </p>
            </div>
          </div>
          <button title="Comprar" matRipple class="reset-a box m-lr-auto" [routerLink]="['/produtos/'+ Produto._id]" routerLinkActive="router-link-active"
          mat-flat-button class="button"><mat-icon color='accent'>shopping_bag</mat-icon>Comprar Agora</button>
        </div>
      </div>
    </mat-card>
    <figure class="image is-64x64 img-orcamento" [ngClass]="isOrcamento ? 'active' : ''">
      <img src="{{Produto?.Imagem[0]}}" alt="">
    </figure>
  </ng-template>

  <ng-template #naotroca>
    <mat-card @fadeIn
    (mouseenter)="
      this.imgProduto.classList.add('hide');
      this.imgProduto.classList.remove('show');
      " (mouseout)="
      this.imgProduto.classList.remove('hide');
      this.imgProduto.classList.add('show');
      "
      matRipple class="portfolio-item zoom of-y-scroll" [style.backgroundColor]="Produto.Categoria.Cor">
      <!-- <span class="prod-status is-hidden-desktop">
        <i class="pi pi-tag"></i>
        {{Produto?.Status == statusProduto.promocao ? 'Promoção' : translateStatusProduto(Produto.Status) }}
      </span> -->

      <div #imgProduto matRipple class="dis-flex flex-w">
        <!-- <img
          mat-card-image #imgProduto
          class=""
          [src]="Produto.Imagem[0]" [style.opacity]="'1'" [style.display]="'block'"
          alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
        <img
          mat-card-image #imgProduto2
          class="hide" [src]="Produto.Imagem[1] || Produto.Imagem[0]"
          alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}"> -->
          <slideshow mat-card-image
              *ngIf="imageUrls.length"
               [imageUrls]="imageUrls"
               [arrowSize]="(Carrosel$|async)?.arrowSize"
               [showArrows]="(Carrosel$|async)?.showArrows"
               [disableSwiping]="false"
               [backgroundSize]="'contain'"
               [autoPlay]="false"
               [backgroundPosition]="(Carrosel$|async)?.backgroundPosition"
               [backgroundRepeat]="(Carrosel$|async)?.backgroundRepeat"
               [showDots]="(Carrosel$|async)?.showDots"
               [dotColor]="'black'"
               [showCaptions]="(Carrosel$|async)?.showCaptions"
               [captionColor]="(Carrosel$|async)?.captionColor"
               [captionBackground]="(Carrosel$|async)?.captionBackground"
               [lazyLoad]="(Carrosel$|async)?.lazyLoad"
               [hideOnNoSlides]="(Carrosel$|async)?.hideOnNoSlides"
               [fullscreen]="(Carrosel$|async)?.fullscreen"
               [autoPlayWaitForLazyLoad]="true"
               >
            </slideshow>
      </div>

      <span class="prod-status is-hidden-desktop is-hidden-touch">
        <i class="pi pi-tag"></i>
        {{Produto?.Status == statusProduto.promocao ? 'Promoção' : translateStatusProduto(Produto.Status) }}
      </span>

      <a *ngIf="Produto.Cores?.length > 1" class="prod-status " [href]="'/produtos/'+Produto._id">
        <span  routerLinkActive="router-link-active"
          class="button is-size-7 is-small bo-0 is-fullwidth border is-disabled px-4">
          Em {{Produto.Cores?.length}} cores
        </span>
      </a>

      <mat-card-footer class="px-1 z-index-2">

        <mat-card-header class="w-full txt-center pt-1">

          <mat-card-title class="w-full txt-center titulo-produto">
            <a matRipple class="reset-a" [href]="['/produtos/'+ Produto._id]">
              {{Produto?.Nome}}
            </a>
            <!-- <div class="my-3">
              <star-rating [rating]="meanRating()" [hoverEnabled]="true" [readOnly]="true" [showHalfStars]="true"
                [step]="0.5" staticColor="ok" [starType]="'svg'"></star-rating>
            </div> -->
            <ng-container *ngIf="Produto.Status == statusProduto.promocao then preco_promo else preco_normal">
            </ng-container>
            <ng-template #preco_promo>
              <div class="txt-center">
                <p class="preco-produto linethr">R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</p>
                <p class="preco-produto promocao">R$ {{Produto?.PrecoPromocional.toFixed(2) || '0.00'}}</p>
              </div>
            </ng-template>
            <ng-template #preco_normal>
              <div class="txt-center">
                <p class="preco-produto ">R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</p>
              </div>
            </ng-template>
          </mat-card-title>
          <!-- <mat-card-subtitle class="txt-center w-full is-6">{{Produto?.Subtitulo}}</mat-card-subtitle> -->

          <mat-card-subtitle mat-card-subtitle
            class="w-full z-index-2 txt-center px-3 left-0 bottom-0 pb-4 pt-4 is-3 preco">
            <div class="my-3" *ngIf="Produto.Parcelas && Produto.Parcelas > 0">
              <p class="preto6 parcelas" *ngIf="Produto.Parcelas > 1">
                Em até {{Produto.Parcelas}}x <span
                  class="parcelas">
                  <b>R${{(Produto.Status == statusProduto.promocao ? Produto.PrecoPromocional : Produto.Preco / Produto.Parcelas).toFixed(2)}}</b></span>
                sem juros
              </p>
              <p class="preto6 parcelas" *ngIf="Produto.Parcelas == 1">
                Á vista por <span
                  class="parcelas"><b>R${{(Produto.Status == statusProduto.promocao ? Produto.PrecoPromocional : Produto.Preco / Produto.Parcelas).toFixed(2)}}</b></span>
                sem juros
              </p>
            </div>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions class="pos-absolute bottom-0">
          <mat-divider class="my-2"></mat-divider>
          <div class="px-4 py-2">
            <span [routerLink]="['/produtos/'+ Produto._id]" routerLinkActive="router-link-active"
              class="button is-small is-fullwidth box px-4 mb-2 pb-2">
              <span><i class="pi pi-plus"></i> Veja mais</span>
            </span>
          </div>
        </mat-card-actions>


      </mat-card-footer>
      <div class="z-index-1">
        <div class="content a-i-c m-lr-auto w-full">
          <div class="portfolio-overlay events-none w-full">
            <div class="overlay-items w-full txt-center">
              <p>
                {{Produto?.Nome}}
              </p>
            </div>
          </div>
          <a title="Comprar" matRipple class="reset-a box m-lr-auto" [href]="['/produtos/'+ Produto._id]" routerLinkActive="router-link-active"
          mat-flat-button class="button"><mat-icon color='accent'>shopping_bag</mat-icon></a>
        </div>
      </div>
    </mat-card>
    <figure class="image is-64x64 img-orcamento" [ngClass]="isOrcamento ? 'active' : ''">
      <img src="{{Produto?.Imagem[0]}}" alt="">
    </figure>
  </ng-template>

</ng-template>

<ng-template #Minimalista>
  <mat-card data-aos="flip-down" class="flex-w flex-c portfolio-item zoom">
    <a pageScroll href="#PRODUTO" [routerLink]="['/produtos/',Produto._id]" routerLinkActive="router-link-active">
      <img src="{{Produto?.Imagem[0]}}" alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
      <mat-card-content class="flex-w flex-c">
        <div class="portfolio-overlay w-full">
          <div class="overlay-items w-full flex-w flex-c">
            <p>
              {{Produto?.Nome}}
            </p>
          </div>
        </div>
      </mat-card-content>
    </a>
  </mat-card>
</ng-template>
