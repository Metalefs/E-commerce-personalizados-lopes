<ng-container *ngIf="MostarOpcoes then Padrao else Minimalista"></ng-container>

<ng-template #Padrao>
  <mat-card
    @fadeIn
    matRipple
    class="portfolio-item zoom"
    [style.backgroundColor]="Produto.Categoria.Cor"
   >

    <ng-container *ngIf="TrocaImagem then troca else naotroca"> </ng-container>
    <ng-template #troca>
      <a
      matRipple
      [href]="['/produtos/'+ Produto._id]"
      routerLinkActive="router-link-active"
      class="dis-flex flex-w"
      >
      <img
      mat-card-image
      #imgProduto
      (mouseenter)="
      this.imgProduto.classList.add('hide');
      this.imgProduto.classList.remove('show');
      this.imgProduto2.classList.remove('hide');
      this.imgProduto2.classList.add('show');
      "
      [src]="Produto.Imagem[0]"
      [style.opacity]="'1'"
      [style.display]="'block'"
      alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
    <img
      mat-card-image
      #imgProduto2
      (mouseout)="
      this.imgProduto2.classList.remove('show');
      this.imgProduto2.classList.add('hide');
      this.imgProduto.classList.remove('hide');
      this.imgProduto.classList.add('show');
      "
      class="hide"
      [src]="Produto.Imagem[1]"
      alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
    </a>
    </ng-template>
    <ng-template #naotroca>

      <div class="swiper-container z-index-1" [swiper]="swiperConfig">
        <div class="swiper-wrapper">
          <div class="swiper-slide" *ngFor="let image of Produto.Imagem" >
            <img
              mat-card-image
              #imgProduto
              [src]="image"
              [style.opacity]="'1'"
              [style.display]="'block'"
              alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
          </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>

    </ng-template>

   <mat-card-footer class="px-1">
     <div class="px-4">
       <span *ngIf="Produto.Cores?.length > 1" class="button is-small is-fullwidth card is-disabled px-4">
         Disponível em {{Produto.Cores?.length}} cores
       </span>
     </div>
     <mat-card-header class="w-full txt-left pt-1">
        <mat-card-title class="w-full txt-left titulo-produto">{{Produto?.Nome}}</mat-card-title>
        <mat-card-subtitle class="mat-card-subtitle preco is-6">{{Produto?.Subtitulo}}</mat-card-subtitle>
        <mat-card-subtitle class="is-3 preco">


          <ng-container *ngIf="Produto.Status == statusProduto.promocao then preco_promo else preco_normal"></ng-container>
          <ng-template #preco_promo>
            <div class="txt-left">
              <p class="preco-produto linethr">R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</p>
              <p class="preco-produto promocao">R$ {{Produto?.PrecoPromocional.toFixed(2) || '0.00'}}</p>
            </div>
          </ng-template>
          <ng-template #preco_normal>
            <div class="txt-left">
              <p class="preco-produto">R$ {{Produto?.Preco.toFixed(2) || '0.00'}}</p>
            </div>
          </ng-template>
          <div class="my-3" *ngIf="Produto.Parcelas && Produto.Parcelas > 0">
            <p class="preto6">
              Em até {{Produto.Parcelas}}x <span class="preco-produto"><b>R${{(Produto.Preco / Produto.Parcelas).toFixed(2)}}</b></span> sem juros
            </p>
          </div>

          <button
            [disabled]="Produto.Status == statusProduto.esgotado"
            mat-stroked-button
            (click)="AdicionarAoOrcamento(Produto)"
            color="primary"
            class="has-background-light w-full px-2 has-text-grey btn-cart">
            <ng-container *ngIf="Produto.Status != statusProduto.esgotado
            then adicionar else esgotado"></ng-container>
            <ng-template #adicionar>
              <mat-icon>add_shopping_cart</mat-icon>Adicionar
            </ng-template>
            <ng-template #esgotado>
              Esgotado
            </ng-template>
          </button>
        </mat-card-subtitle>
      </mat-card-header>
      <div class="my-3">
        <star-rating
        labelText="{{meanRating()}}"
        [rating]="meanRating()"
        [hoverEnabled]="true"
        [readOnly]="true"
        [showHalfStars]="true"
        [step]="0.5"
        staticColor="ok"
        [starType]="'svg'"></star-rating>
      </div>
    </mat-card-footer>
    <a [href]="['/produtos/'+ Produto._id]" routerLinkActive="router-link-active">
      <!-- <mat-card-actions class="mat-card-actions flex-w flex-c flex-m w-full mx-3">
        <button mat-stroked-button color="accent"
          class="mat-focus-indicator has-text-white w-full mat-raised-button mat-button-base">
          Veja mais
        </button>
        </mat-card-actions> -->
      <div class="">
        <div class="content">
          <div class="portfolio-overlay w-full">
            <div class="overlay-items w-full txt-center">
              <p>
                {{Produto?.Nome}}
              </p>
              <a matRipple
              class="reset-a"
              [href]="['/produtos/'+ Produto._id]"
              routerLinkActive="router-link-active" mat-flat-button class="button">Comprar Agora</a>
            </div>
          </div>
        </div>
      </div>
    </a>
    </mat-card>
    <figure class="image is-64x64 img-orcamento" [ngClass]="isOrcamento ? 'active' : ''">
      <img src="{{Produto?.Imagem[0]}}" alt="">
    </figure>
</ng-template>

<ng-template #Minimalista>
  <mat-card data-aos="flip-down" class="flex-w flex-c portfolio-item zoom">
    <a pageScroll href="#PRODUTO" [routerLink]="['/produtos/',Produto._id]" routerLinkActive="router-link-active">
      <img src="{{Produto?.Imagem[0]}}" alt="Foto de {{Produto?.NomeCategoria}} {{Produto?.Cor}} - {{Produto?.Nome}}">
      <mat-card-content class="flex-w flex-c">
        <div class="portfolio-overlay w-full">
          <div class="overlay-items w-full flex-w flex-c">
            <p>
              {{Produto?.Nome}}
            </p>
          </div>
        </div>
      </mat-card-content>
    </a>
  </mat-card>
</ng-template>
